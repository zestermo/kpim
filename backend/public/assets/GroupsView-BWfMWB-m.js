import{n as $,r as m,o as j,q as S,c as a,b as e,e as h,A as M,t as l,g as d,h as p,i as D,j as P,k as T,F as x,s as b,w as Y,f as R,v as A,T as L,m as o,x as G,y as O}from"./index-67zp9BDn.js";import{_ as q}from"./IdolCard-Dnm2z2pu.js";const z={class:"space-y-6"},U={class:"flex items-center justify-between flex-wrap gap-4"},X={class:"text-gray-400"},H=["disabled"],J={class:"text-sm opacity-75"},K={key:0,class:"game-panel p-4 border-yellow-500/50"},Q={class:"text-yellow-400 flex items-center gap-2"},W={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z={class:"flex items-start justify-between mb-4"},ee={class:"text-xl font-bold"},te={class:"flex items-center gap-2 mt-1"},se={class:"text-sm"},le={class:"text-sm text-gray-400"},oe={class:"text-right"},ae={class:"text-kpop-gold-400 font-bold"},ne={class:"flex flex-wrap gap-2 mb-4"},ie={class:"grid grid-cols-3 gap-2 pt-4 border-t border-gray-700"},re={class:"text-center"},de={class:"text-lg font-bold"},ue={class:"text-center"},ce={class:"text-lg font-bold"},pe={class:"text-center"},ve={class:"text-lg font-bold"},ge={class:"mt-4 flex items-center gap-2"},me={class:"stat-bar flex-1"},xe={class:"text-sm font-medium"},be={key:2,class:"game-panel p-12 text-center"},fe=["disabled"],_e={class:"game-panel p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ye={class:"mb-6"},he={class:"mb-6"},ke={class:"grid grid-cols-2 sm:grid-cols-4 gap-2"},we=["onClick"],Ce={class:"text-lg"},Se={class:"text-xs text-gray-400"},Me={class:"mb-6"},Ge={class:"block text-sm text-gray-400 mb-2"},Ne={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-[300px] overflow-y-auto p-2"},Ie={key:0,class:"text-center text-gray-400 py-8"},Fe={class:"flex gap-3"},Ve=["disabled"],Ee={key:0,class:"flex items-center justify-center gap-2"},Be={key:1},N=1e4,v=2,k=7,Pe={__name:"GroupsView",setup($e){const n=$(),u=m(!1),c=m(""),g=m("cute"),i=m([]),f=[{value:"cute",label:"ðŸ’• Cute",description:"Sweet and adorable"},{value:"girl_crush",label:"ðŸ”¥ Girl Crush",description:"Fierce and confident"},{value:"elegant",label:"âœ¨ Elegant",description:"Sophisticated and graceful"},{value:"fresh",label:"ðŸŒ¿ Fresh",description:"Youthful and energetic"},{value:"powerful",label:"ðŸ’ª Powerful",description:"Strong and impactful"},{value:"dark",label:"ðŸ–¤ Dark",description:"Mysterious and edgy"},{value:"retro",label:"ðŸ“» Retro",description:"Classic and nostalgic"}];j(async()=>{await Promise.all([n.fetchGroups(),n.fetchIdols()])});const w=S(()=>{var r;return n.availableIdols.length>=v&&((r=n.player)==null?void 0:r.money)>=N}),I=S(()=>c.value.trim().length>0&&i.value.length>=v&&i.value.length<=k);function C(){c.value="",g.value="cute",i.value=[],u.value=!0}function F(r){const t=i.value.indexOf(r.id);t===-1?i.value.length<k&&i.value.push(r.id):i.value.splice(t,1)}async function V(){(await n.createGroup(c.value,g.value,i.value)).success&&(u.value=!1)}function E(r){return f.find(t=>t.value===r)||f[0]}return(r,t)=>{const B=T("router-link");return o(),a("div",z,[e("div",U,[e("div",null,[t[3]||(t[3]=e("h1",{class:"text-2xl font-bold"},"Your Groups",-1)),e("p",X,l(d(n).groups.length)+" active groups",1)]),e("button",{onClick:C,class:"btn-primary flex items-center gap-2",disabled:!w.value},[t[4]||(t[4]=e("span",null,"ðŸ‘¥",-1)),t[5]||(t[5]=p(" Form New Group ",-1)),e("span",J,"(ðŸ’° "+l(N.toLocaleString())+")",1)],8,H)]),d(n).availableIdols.length<v?(o(),a("div",K,[e("p",Q,[t[7]||(t[7]=e("span",null,"âš ï¸",-1)),p(" You need at least "+l(v)+" available idols to form a group. "),D(B,{to:"/idols",class:"underline"},{default:P(()=>[...t[6]||(t[6]=[p("Scout more idols",-1)])]),_:1})])])):h("",!0),d(n).groups.length>0?(o(),a("div",W,[(o(!0),a(x,null,b(d(n).groups,s=>{var _;return o(),a("div",{key:s.id,class:"game-panel p-6"},[e("div",Z,[e("div",null,[e("h3",ee,l(s.name),1),e("div",te,[e("span",se,l(E(s.concept).label),1),t[8]||(t[8]=e("span",{class:"text-gray-500"},"â€¢",-1)),e("span",le,l(s.member_count)+" members",1)])]),e("div",oe,[e("div",ae,"â­ "+l(s.average_star_power),1),t[9]||(t[9]=e("div",{class:"text-xs text-gray-400"},"Avg. Star Power",-1))])]),e("div",ne,[(o(!0),a(x,null,b(s.members,y=>(o(),a("div",{key:y.id,class:G(["px-3 py-1 bg-gray-800 rounded-full text-sm",`rarity-${y.rarity}`])},l(y.name),3))),128))]),e("div",ie,[e("div",re,[e("div",de,l(Math.round(s.average_vocal||0)),1),t[10]||(t[10]=e("div",{class:"text-xs text-gray-400"},"Vocal",-1))]),e("div",ue,[e("div",ce,l(Math.round(s.average_dance||0)),1),t[11]||(t[11]=e("div",{class:"text-xs text-gray-400"},"Dance",-1))]),e("div",pe,[e("div",ve,l(Math.round(s.average_visual||0)),1),t[12]||(t[12]=e("div",{class:"text-xs text-gray-400"},"Visual",-1))])]),e("div",ge,[t[13]||(t[13]=e("span",{class:"text-sm text-gray-400"},"Popularity",-1)),e("div",me,[e("div",{class:"stat-bar-fill bg-gradient-to-r from-kpop-pink-500 to-kpop-purple-500",style:O({width:`${Math.min(100,s.popularity/100)}%`})},null,4)]),e("span",xe,l(((_=s.popularity)==null?void 0:_.toLocaleString())||0),1)])])}),128))])):(o(),a("div",be,[t[14]||(t[14]=e("div",{class:"text-6xl mb-4"},"ðŸ‘¥",-1)),t[15]||(t[15]=e("h2",{class:"text-xl font-bold mb-2"},"No Groups Yet",-1)),t[16]||(t[16]=e("p",{class:"text-gray-400 mb-6"},"Form your first group to start producing music!",-1)),e("button",{onClick:C,class:"btn-primary",disabled:!w.value}," Form Your First Group ",8,fe)])),(o(),M(L,{to:"body"},[u.value?(o(),a("div",{key:0,class:"modal-backdrop",onClick:t[2]||(t[2]=Y(s=>u.value=!1,["self"]))},[e("div",_e,[t[20]||(t[20]=e("h2",{class:"text-2xl font-bold mb-6 text-center"},"Form New Group",-1)),e("div",ye,[t[17]||(t[17]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Group Name",-1)),R(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),type:"text",class:"input-field",placeholder:"Enter a catchy group name...",maxlength:"50"},null,512),[[A,c.value]])]),e("div",he,[t[18]||(t[18]=e("label",{class:"block text-sm text-gray-400 mb-2"},"Concept",-1)),e("div",ke,[(o(),a(x,null,b(f,s=>e("button",{key:s.value,onClick:_=>g.value=s.value,class:G(["p-3 rounded-xl border-2 transition-all text-center",g.value===s.value?"border-kpop-pink-500 bg-kpop-pink-500/10":"border-gray-600 hover:border-gray-500"])},[e("div",Ce,l(s.label.split(" ")[0]),1),e("div",Se,l(s.label.split(" ").slice(1).join(" ")),1)],10,we)),64))])]),e("div",Me,[e("label",Ge,[p(" Select Members ("+l(i.value.length)+"/"+l(k)+") ",1),e("span",{class:"text-kpop-pink-400"},"- Min "+l(v)+" required")]),e("div",Ne,[(o(!0),a(x,null,b(d(n).availableIdols,s=>(o(),M(q,{key:s.id,idol:s,selectable:!0,selected:i.value.includes(s.id),onSelect:F},null,8,["idol","selected"]))),128))]),d(n).availableIdols.length===0?(o(),a("p",Ie," No available idols. Scout more or remove idols from existing groups. ")):h("",!0)]),e("div",Fe,[e("button",{onClick:t[1]||(t[1]=s=>u.value=!1),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:V,class:"btn-primary flex-1",disabled:!I.value||d(n).loading},[d(n).loading?(o(),a("span",Ee,[...t[19]||(t[19]=[e("span",{class:"spinner"},null,-1),p(" Creating... ",-1)])])):(o(),a("span",Be,"Debut Group! ðŸŽ‰"))],8,Ve)])])])):h("",!0)]))])}}};export{Pe as default};
